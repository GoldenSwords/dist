(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2620be02","chunk-2d0c209c"],{"0914":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{staticStyle:{width:"100%",height:"100%"}},[n("el-main",{staticStyle:{width:"100%",height:"100%"}},[n("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[n("div",{ref:"clickDom",staticClass:"pageBox",staticStyle:{width:"100%",height:"100%"},on:{click:t.manageScreen,contextmenu:function(e){return e.preventDefault(),t.contextmenu(e)}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.sliderShow,expression:"sliderShow"}],staticClass:"panelBorder",staticStyle:{position:"absolute","z-index":"10"},style:{left:t.left+"px",top:t.top+"px"},on:{click:function(e){t.sliderShow=!1}}},[n("ul",{staticClass:"panelBox"},t._l(t.panelTemplateData,(function(e){return n("li",{key:e.id,on:{click:function(n){return t.addPanel(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]),t._l(t.activeComponents,(function(e){return[n(e.comp,{key:e._uuid,ref:"comps",refInFor:!0,tag:"component",attrs:{opt:e},on:{silent:t.silent,onmanage:t.manage}})]}))],2),n("div",{directives:[{name:"show",rawName:"v-show",value:t.drawer,expression:"drawer"}],staticStyle:{width:"260px",height:"100%",position:"absolute",right:"0",top:"0","z-index":"50","background-color":"rgba(0, 0, 0,.2)",color:"#fff","border-left":"2px solid rgba(255,255,255,.2)"}},[n("h1",[t._v(t._s(t.configData.name))]),t._l(t.activeConfigs,(function(e){return[n("el-row",{key:e._uuid},[n("el-col",{staticStyle:{"text-align":"right",padding:"0 10px"},attrs:{span:12}},[t._v(" "+t._s(e.obj.name)+" ")]),n("el-col",{attrs:{span:12}},[n(e.comp,{tag:"component",attrs:{value:e.obj.model,obj:e},on:{callback:t.configCallback}})],1)],1)]}))],2)])])],1)},a=[],i=(n("4160"),n("a434"),n("b0c0"),n("159b"),n("ddd8")),c=n("4934"),r={name:"ScreenInstance",components:{},data:function(){return{configData:{},drawer:!1,top:0,left:0,silentEvent:!1,sliderShow:!1,panelTemplateData:[],compoTemplateData:[],activeComponents:[],activeConfigs:[]}},watch:{configData:function(t){if(this.activeConfigs.splice(0,this.activeConfigs.length),t&&t.configRoot.child)for(var e=0;e<t.configRoot.child.length;e++)this.regist(t.configRoot.child[e].code,t.configRoot.child[e].component,t.configRoot.child[e])}},beforeMount:function(){this.getData()},methods:{configCallback:function(t,e){var n=this,o=null;this.activeConfigs.forEach((function(n){n===e&&(n.obj.model=t,o=n)})),this.activeComponents.forEach((function(t){t===n.configData&&(console.log(n.configData.configRoot.key,t.config[n.configData.configRoot.key]),t.config[n.configData.configRoot.key][o.obj.key]=o.obj.model)}))},regist:function(t,e,n){var o=this;Object(i["registComponent"])(t,e).then((function(e){o.activeConfigs.push({name:t,obj:n,comp:e.default,_uuid:Object(i["generateUUID"])()})}))},addPanel:function(t){var e=this;Object(c["componentsTemplateDetail"])(JSON.stringify(t)).then((function(n){n.config&&Object(c["getComponentConfigTemplateDetail"])(JSON.stringify(n.data.msg.config.configId)).then((function(o){Object(i["registComponent"])(t.code,t.component).then((function(t){e.activeComponents.push({name:n.data.msg.code,comp:t.default,config:e.formatterKeyValue(o.data.msg),configRoot:o.data.msg,_uuid:Object(i["generateUUID"])()})}))}))}))},formatterKeyValue:function(t){var e={},n="key",o="model";if(t.child){t.child.forEach((function(t){e[t[n]]=t[o]}));var a={};return a[t[n]]=e,a}return{}},getData:function(){var t=this;Object(c["getPanelTemplateList"])().then((function(e){t.panelTemplateData=e.data.msg}))},manageScreen:function(t){this.configData.name&&t.target!==this.$refs.clickDom?this.drawer=!0:this.drawer=!1,this.silent()},contextmenu:function(t){t.target===this.$refs.clickDom&&(this.silent(),this.left=t.layerX,this.top=t.layerY,this.sliderShow=!0)},manage:function(t){console.log(t),this.configData=t,this.drawer=!0},silent:function(){this.sliderShow=!1,this.$refs.comps&&this.$refs.comps.forEach((function(t){t.silent()}))}}},s=r,u=(n("afea"),n("2877")),f=Object(u["a"])(s,o,a,!1,null,"1182de52",null);e["default"]=f.exports},4934:function(t,e,n){"use strict";n.r(e),n.d(e,"getComponentBaseConfigTemplateList",(function(){return c})),n.d(e,"BaseCompoList",(function(){return r})),n.d(e,"BaseCompoRelations",(function(){return s})),n.d(e,"BaseType",(function(){return u})),n.d(e,"findBaseCompCachcade",(function(){return f})),n.d(e,"componentsList",(function(){return l})),n.d(e,"getBaseCompoDetail",(function(){return d})),n.d(e,"componentsTemplateList",(function(){return p})),n.d(e,"componentsTemplateDetail",(function(){return g})),n.d(e,"BaseTypeList",(function(){return m})),n.d(e,"getComponentConfigTemplateDetail",(function(){return h})),n.d(e,"delComponentConfigTemplate",(function(){return C})),n.d(e,"updateComponentConfigTemplate",(function(){return v})),n.d(e,"AddComponentConfigTemplate",(function(){return b})),n.d(e,"DelConfigTemplateInst",(function(){return D})),n.d(e,"saveCompoTemplate",(function(){return T})),n.d(e,"getCompoTempList",(function(){return w})),n.d(e,"getPanelTemplateList",(function(){return y})),n.d(e,"PluginsDataList",(function(){return k}));var o=n("245a"),a=n("bc3a"),i=n.n(a),c=function(t){return i.a.get("/getComponentBaseConfigTemplateList",{data:t})},r=function(t){return i.a.get("/BaseCompoList",{data:t})},s=function(t){return i.a.get("/BaseCompoRelations",{data:t})},u=function(t){return i.a.get("/BaseType",{data:t})},f=function(t){return i.a.get("/findBaseCompCachcade",{data:t})},l=function(t){return i.a.get("/componentsList",{data:t})},d=function(t){return i.a.get("/getBaseCompoDetail",{data:t})},p=function(t){return i.a.get("/componentsTemplateList",{data:t})},g=function(t){return i.a.get("/componentsTemplateDetail",{data:t})},m=function(t){return i.a.get("/BaseTypeList",{data:t})},h=function(t){return i.a.get("/getComponentConfigTemplateDetail",{data:t})},C=function(t){return i.a.get("/delComponentConfigTemplate",{data:t})},v=function(t){return i.a.get("/updateComponentConfigTemplate",{data:t})},b=function(t){return i.a.get("/AddComponentConfigTemplate",{data:t})},D=function(t){return i.a.get("/DelConfigTemplateInst",{data:t})},T=function(t){return i.a.get("/saveCompoTemplate",{data:t})},w=function(t){return i.a.get("/getCompoTempList",{data:t})},y=function(t){return i.a.get("/getPanelTemplateList",{data:t})},k=function(t){return i.a.get("/PluginsDataList",{data:t})};Object(o["default"])({mock:!0})},afea:function(t,e,n){"use strict";var o=n("ec9b"),a=n.n(o);a.a},ec9b:function(t,e,n){}}]);
//# sourceMappingURL=chunk-2620be02.7c1a2ea3.js.map