{"version":3,"sources":["webpack:///./src/plugins/canvasPlugins/curveTxt.js","webpack:///./node_modules/@babel/runtime-corejs3/helpers/esm/createClass.js","webpack:///./node_modules/@babel/runtime-corejs3/helpers/esm/classCallCheck.js"],"names":["Tool","dom","config","options","this","intanceId","ctx","getContext","clearRect","clientWidth","clientHeight","window","cancelAnimationFrame","init","HEIGHT","height","WIDTH","width","linesDataConfig","temp","i","linesData","length","values","value","v","x","y","push","number","obj","moveAniamtion","fillStyle","fillRect","lineWidth","ps","CreateBezierPoints","speed","tempText","depart","paintLines","color","index","forEach","item","font","fillText","requestAnimationFrame","anchorpoints","pointsAmount","points","point","MultiPointBezier","t","len","erxiangshi","start","end","cs","bcs","Math","pow","data","beginPath","setLineDash","moveTo","lineTo","strokeStyle","concat","stroke","lingrad","createLinearGradient","addColorStop","join","instance","_defineProperties","target","props","descriptor","enumerable","configurable","writable","key","_createClass","Constructor","protoProps","staticProps","prototype","_classCallCheck","TypeError"],"mappings":"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","file":"js/chunk-e4bcce6e.9c7265c6.js","sourcesContent":["class Tool {\n  constructor(dom, config, options) {\n    this.dom = dom;\n    this.intanceId = null;\n    this.ctx = dom.getContext(\"2d\");\n    this.config = config;\n    this.options = options;\n  }\n  clearRect(dom) {\n    this.ctx = dom.getContext(\"2d\");\n    this.ctx.clearRect(0, 0, dom.clientWidth, dom.clientHeight); // 清空\n  }\n  reDraw(dom, config, options) {\n    window.cancelAnimationFrame(this.intanceId);\n    this.init(dom, config, options);\n  }\n  /**\n   初始化变量\n  **/\n  init(dom, config, options) {\n    this.dom = dom;\n    this.ctx = dom.getContext(\"2d\");\n    this.config = config;\n    this.options = options;\n\n    this.HEIGHT = this.dom.height = this.dom.clientHeight;\n    this.WIDTH = this.dom.width = this.dom.clientWidth;\n    this.config.linesDataConfig.temp = [];\n    // 派发线条队列\n    for (let i = 0; i < this.options.linesData.length; i++) {\n      let values = this.options.linesData[i].value;\n      for (let v = 0; v < values.length; v++) {\n        values[v].x = values[v].x * this.WIDTH;\n        values[v].y = values[v].y * this.HEIGHT;\n      }\n      this.config.linesDataConfig.temp.push({\n        temp: 0,\n        number: 300,\n        obj: this.options.linesData[i]\n      });\n    }\n    this.moveAniamtion();\n  }\n\n  // 动画\n  moveAniamtion() {\n    // 初始化矩形面板\n    this.ctx.fillStyle = \"rgba(5, 18, 59,0)\";\n    this.ctx.clearRect(0, 0, this.WIDTH, this.HEIGHT); // 清空\n    this.ctx.fillRect(0, 0, this.WIDTH, this.HEIGHT); // 填充\n    for (let i = 0; i < this.config.linesDataConfig.temp.length; i++) {\n      let obj = this.config.linesDataConfig.temp[i];\n      this.ctx.lineWidth = this.config.linesDataConfig.config.lineWidth; // 设置线条粗细\n      const ps = this.CreateBezierPoints(obj.obj.value, obj.number); // 根据给定点生成固定数量的贝塞尔线条路径\n      if (\n        obj.temp + this.config.linesDataConfig.config.speed >\n        ps.length +\n          obj.obj.tempText.length * this.config.linesDataConfig.config.depart\n      ) {\n        obj.temp = 0;\n      } else {\n        obj.temp += this.config.linesDataConfig.config.speed;\n      }\n      this.paintLines(ps, this.config.linesDataConfig.config.color); // 绘制路径\n      this.ctx.fillStyle = \"#d0dcec\"; // 设置画笔颜色\n      if (obj.obj.tempText) {\n        // 这里绘制文本\n        let index = 0;\n        obj.obj.tempText.forEach(item => {\n          if (\n            obj.temp + index * this.config.linesDataConfig.config.depart >= 0 &&\n            obj.temp + index * this.config.linesDataConfig.config.depart <\n              ps.length\n          ) {\n            this.ctx.font = obj.obj.font + \"px bold\";\n            // this.ctx.rotate(-45);\n            this.ctx.fillText(\n              item,\n              ps[obj.temp + index * this.config.linesDataConfig.config.depart]\n                .x - 10,\n              ps[obj.temp + index * this.config.linesDataConfig.config.depart].y\n            );\n          }\n          index--;\n        });\n      }\n      this.ctx.lineWidth = 1; // 恢复到初始化宽度\n    }\n    this.intanceId = window.requestAnimationFrame(() => {\n      this.moveAniamtion();\n    });\n  }\n\n  /**\n   anchorpoints：贝塞尔基点\n   pointsAmount：生成的点数\n   return 路径点的Array\n   **/\n  CreateBezierPoints(anchorpoints, pointsAmount) {\n    const points = [];\n    for (let i = 0; i < pointsAmount; i++) {\n      const point = this.MultiPointBezier(anchorpoints, i / pointsAmount);\n      points.push(point);\n    }\n    return points;\n  }\n\n  // 基点函数\n  MultiPointBezier(points, t) {\n    const len = points.length;\n    let x = 0;\n    let y = 0;\n    const erxiangshi = function(start, end) {\n      let cs = 1;\n      let bcs = 1;\n      while (end > 0) {\n        cs *= start;\n        bcs *= end;\n        start--;\n        end--;\n      }\n      return cs / bcs;\n    };\n    for (let i = 0; i < len; i++) {\n      const point = points[i];\n      x +=\n        point.x *\n        Math.pow(1 - t, len - 1 - i) *\n        Math.pow(t, i) *\n        erxiangshi(len - 1, i);\n      y +=\n        point.y *\n        Math.pow(1 - t, len - 1 - i) *\n        Math.pow(t, i) *\n        erxiangshi(len - 1, i);\n    }\n    return { x: x, y: y };\n  }\n\n  /**\n   绘制线条\n   **/\n  paintLines(data, color) {\n    if (!color || data.length === 0) {\n      return;\n    }\n    this.ctx.beginPath();\n    this.ctx.lineWidth = 2;\n    this.ctx.setLineDash([4, 2]); // 虚线\n    this.ctx.moveTo(data[0].x, data[0].y);\n    for (let i = 1; i < data.length; i++) {\n      this.ctx.lineTo(data[i].x, data[i].y);\n    }\n    if (typeof color === \"string\") {\n      this.ctx.strokeStyle = \"\".concat(\"rgba(\", color, \")\");\n      this.ctx.stroke();\n    } else {\n      const lingrad = this.ctx.createLinearGradient(\n        data[0].x,\n        data[0].y,\n        data[data.length - 1].x,\n        data[data.length - 1].y\n      );\n      for (let i = 0; i < color.length; i++) {\n        lingrad.addColorStop(\n          color.length - 1 === 0 ? 0 : i / (color.length - 1),\n          \"rgba(\" + color[i].join(\",\") + \")\"\n        );\n      }\n      this.ctx.strokeStyle = lingrad;\n      this.ctx.stroke();\n    }\n  }\n}\n\nTool.instance = function(dom, config, options) {\n  return new Tool(dom, config, options);\n};\nexport default Tool;\n","import _Object$defineProperty from \"../../core-js/object/define-property\";\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n\n    _Object$defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}"],"sourceRoot":""}