(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ea0d444","chunk-d7bbe6c4","chunk-2d0c209c"],{"03f6":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{staticStyle:{width:"100%",height:"100%"}},[n("el-main",{staticStyle:{width:"100%",height:"100%"}},[n("el-button",{on:{click:t.add}},[t._v("新增")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{label:"组件名称",prop:"name"}}),n("el-table-column",{attrs:{label:"更新时间",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-time"}),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.dateFormat("yyyy-MM-dd hh:mm:ss",e.row.updatetime)))])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-s-operation"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}}),n("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-s-tools"},on:{click:function(n){return t.handleConfig(e.$index,e.row)}}}),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-remove-outline"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}})],1)]}}])},[n("template",{slot:"header"},[n("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],2)],1),n("el-dialog",{attrs:{visible:t.configModal,width:"50%"},on:{"update:visible":function(e){t.configModal=e}}},[n("template",{slot:"title"},[t._v("预览")]),n("div",{style:{height:t.height+"px"}},[n("el-row",{staticStyle:{height:"100%"}},[n("el-col",{staticStyle:{height:"100%"},attrs:{span:12}},[n("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[n("div",{staticClass:"mask",staticStyle:{width:"100%",height:"100%",position:"absolute","z-index":"1"}}),n(t.instanceComp,{tag:"component"})],1)]),n("el-col",{staticStyle:{height:"100%"},attrs:{span:12}},[n("compo-base-config-view",{attrs:{config:t.detailTarget,selectDataFiled:t.selectData,typeset:t.typeset,plugins:t.plugins},on:{close:t.closeModal}})],1)],1)],1)],2),n("el-dialog",{attrs:{visible:t.addModal,width:"50%"},on:{"update:visible":function(e){t.addModal=e}}},[n("template",{slot:"title"},[t._v(t._s("add"===t.model?"新增":"编辑"))]),n("div",{style:{height:t.height+"px"}},[n("el-row",{staticStyle:{height:"100%"}},[n("el-col",{staticStyle:{height:"100%"},attrs:{span:12}},[n("el-form",[n("el-form-item",[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择"},model:{value:t.instanceObj.type,callback:function(e){t.$set(t.instanceObj,"type",e)},expression:"instanceObj.type"}},t._l(t.typeset,(function(t){return n("el-option",{key:t.value,attrs:{label:t.lable,value:t.value}})})),1)],1),n("el-form-item",[n("el-input",{attrs:{placeholder:"组件名称"},model:{value:t.instanceObj.name,callback:function(e){t.$set(t.instanceObj,"name",e)},expression:"instanceObj.name"}})],1),n("el-form-item",[n("el-input",{attrs:{placeholder:"组件路径 views/..."},model:{value:t.instanceObj.component,callback:function(e){t.$set(t.instanceObj,"component",e)},expression:"instanceObj.component"}})],1),n("el-form-item",[n("el-input",{attrs:{placeholder:"组件标识"},model:{value:t.instanceObj.code,callback:function(e){t.$set(t.instanceObj,"code",e)},expression:"instanceObj.code"}})],1),n("el-form-item",[n("el-button-group",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.doPreview}},[t._v("应用")]),n("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.save}},[t._v(t._s("add"===t.model?"提交":"更新"))]),n("el-button",{attrs:{size:"mini",type:"default"},on:{click:t.cancle}},[t._v("取消")])],1)],1)],1)],1),n("el-col",{staticStyle:{height:"100%"},attrs:{span:12}},[n("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[n("div",{staticClass:"mask",staticStyle:{width:"100%",height:"100%",position:"absolute","z-index":"1"}}),n(t.viewComp.comp,{tag:"component"})],1)])],1)],1)],2)],1)],1)},a=[],o=(n("7db0"),n("a434"),n("b0c0"),n("ddd8")),l=n("4934"),s=n("aec0"),c={name:"CompConfig",components:{CompoBaseConfigView:s["default"]},data:function(){return{model:"add",typeset:[{value:0,lable:"面板"},{value:1,lable:"组件"}],height:0,selectData:{configDataList:[]},configSelect:null,compsInstance:[],addModal:!1,configModal:!1,search:"",dateFormat:null,loading:!1,instanceObj:{type:0,component:null,code:null,name:null},viewComp:{name:"",comp:null},plugins:[],detailTarget:{},tableData:[{name:"name"}]}},computed:{configData:function(){return this.detailTarget.config},instanceComp:function(){var t=this,e=this.compsInstance.find((function(e){return e.name===t.detailTarget.code}));return e?e.comp:void 0}},beforeMount:function(){this.dateFormat=o["dateFormat"],this.listTable()},mounted:function(){this.height=.5*document.body.clientHeight,this.getSelectList()},methods:{getSelectList:function(){var t=this;Object(l["PluginsDataList"])().then((function(e){t.plugins=e.data.msg})),Object(l["getComponentBaseConfigTemplateList"])().then((function(e){t.selectData.configDataList=e.data.msg}))},save:function(){var t=this;Object(l["saveCompoTemplate"])(JSON.stringify(this.instanceObj)).then((function(e){e.data.status?(t.listTable(),t.closeModal()):t.$message(e.msg)}))},cancle:function(){this.closeModal(),this.clearModal()},doPreview:function(){var t=this;this.viewComp.name=this.instanceObj.code,this.instanceObj.code&&this.instanceObj.component?Object(o["registComponent"])(this.instanceObj.code,this.instanceObj.component).then((function(e){t.viewComp.comp=e.default})):this.$message("请指定code和component")},listTable:function(){var t=this;this.compsInstance.splice(0,this.compsInstance.length),Object(l["componentsTemplateList"])().then((function(e){if(e.data.status){t.tableData=e.data.msg;for(var n=0;n<t.tableData.length;n++)t.regist(t.tableData[n].code,t.tableData[n].component)}}))},regist:function(t,e){var n=this;Object(o["registComponent"])(t,e).then((function(e){n.compsInstance.push({name:t,comp:e.default})}))},handleDelete:function(){},handleConfig:function(t,e){var n=this;Object(l["componentsTemplateDetail"])(JSON.stringify(e)).then((function(t){n.detailTarget=t.data.msg,n.configModal=!0}))},handleEdit:function(t,e){var n=this;this.model="edit",Object(l["componentsTemplateDetail"])(JSON.stringify(e)).then((function(t){for(var e in n.detailTarget=t.data.msg,n.detailTarget)n.instanceObj[e]=n.detailTarget[e];n.addModal=!0,n.doPreview()}))},clearModal:function(){this.viewComp.comp=null,this.detailTarget={},this.instanceObj.type=0,this.instanceObj.component=null,this.instanceObj.code=null,this.instanceObj.name=null},closeModal:function(){this.configModal=!1,this.addModal=!1},add:function(){this.model="add",this.clearModal(),this.addModal=!0}}},r=c,u=n("2877"),p=Object(u["a"])(r,i,a,!1,null,"3ef213f2",null);e["default"]=p.exports},4934:function(t,e,n){"use strict";n.r(e),n.d(e,"getComponentBaseConfigTemplateList",(function(){return l})),n.d(e,"BaseCompoList",(function(){return s})),n.d(e,"BaseCompoRelations",(function(){return c})),n.d(e,"BaseType",(function(){return r})),n.d(e,"findBaseCompCachcade",(function(){return u})),n.d(e,"componentsList",(function(){return p})),n.d(e,"getBaseCompoDetail",(function(){return d})),n.d(e,"componentsTemplateList",(function(){return m})),n.d(e,"componentsTemplateDetail",(function(){return h})),n.d(e,"BaseTypeList",(function(){return f})),n.d(e,"getComponentConfigTemplateDetail",(function(){return g})),n.d(e,"delComponentConfigTemplate",(function(){return b})),n.d(e,"updateComponentConfigTemplate",(function(){return v})),n.d(e,"AddComponentConfigTemplate",(function(){return y})),n.d(e,"DelConfigTemplateInst",(function(){return C})),n.d(e,"saveCompoTemplate",(function(){return T})),n.d(e,"getCompoTempList",(function(){return w})),n.d(e,"getPanelTemplateList",(function(){return D})),n.d(e,"PluginsDataList",(function(){return O}));var i=n("245a"),a=n("bc3a"),o=n.n(a),l=function(t){return o.a.get("/getComponentBaseConfigTemplateList",{data:t})},s=function(t){return o.a.get("/BaseCompoList",{data:t})},c=function(t){return o.a.get("/BaseCompoRelations",{data:t})},r=function(t){return o.a.get("/BaseType",{data:t})},u=function(t){return o.a.get("/findBaseCompCachcade",{data:t})},p=function(t){return o.a.get("/componentsList",{data:t})},d=function(t){return o.a.get("/getBaseCompoDetail",{data:t})},m=function(t){return o.a.get("/componentsTemplateList",{data:t})},h=function(t){return o.a.get("/componentsTemplateDetail",{data:t})},f=function(t){return o.a.get("/BaseTypeList",{data:t})},g=function(t){return o.a.get("/getComponentConfigTemplateDetail",{data:t})},b=function(t){return o.a.get("/delComponentConfigTemplate",{data:t})},v=function(t){return o.a.get("/updateComponentConfigTemplate",{data:t})},y=function(t){return o.a.get("/AddComponentConfigTemplate",{data:t})},C=function(t){return o.a.get("/DelConfigTemplateInst",{data:t})},T=function(t){return o.a.get("/saveCompoTemplate",{data:t})},w=function(t){return o.a.get("/getCompoTempList",{data:t})},D=function(t){return o.a.get("/getPanelTemplateList",{data:t})},O=function(t){return o.a.get("/PluginsDataList",{data:t})};Object(i["default"])({mock:!0})},aec0:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{staticStyle:{width:"100%",height:"100%"}},[n("el-main",{staticStyle:{width:"100%",height:"100%"}},[n("el-row",{ref:"row",staticStyle:{height:"30px","line-height":"30px"}},[n("el-col",{attrs:{span:4}},[t._v("类型")]),n("el-col",{attrs:{span:20}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择"},model:{value:t.typevalue,callback:function(e){t.typevalue=e},expression:"typevalue"}},t._l(t.typeset,(function(t){return n("el-option",{key:t.value,attrs:{label:t.lable,value:t.value}})})),1)],1)],1),n("el-row",{ref:"row",staticStyle:{height:"30px","line-height":"30px"}},[n("el-col",{attrs:{span:4}},[t._v("配置项")]),n("el-col",{attrs:{span:20}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择"},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},t._l(t.selectDataFiled.configDataList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),n("el-row",{staticClass:"LScroll",staticStyle:{height:"calc(100% - 90px)",overflow:"auto"}},[n("el-col",{attrs:{span:4}},[t._v("扩展项")]),n("el-col",{attrs:{span:20}},[t._l(t.pluginData,(function(e,i){return n("div",{key:i},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择"},on:{change:t.pluginChange},model:{value:e.code,callback:function(n){t.$set(e,"code",n)},expression:"item.code"}},t._l(t.plugins,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)})),n("div",[n("el-button",{staticStyle:{width:"100%","padding-right":"30px"},attrs:{icon:"el-icon-circle-plus",size:"mini"},on:{click:t.addPlugin}})],1)],2)],1),n("el-row",{staticStyle:{height:"30px","line-height":"30px","text-align":"center"}},[n("el-col",{attrs:{span:24}},[n("el-button-group",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.saveConfig}},[t._v("确认")]),n("el-button",{attrs:{type:"default",size:"mini"},on:{click:t.clearForm}},[t._v("取消")])],1)],1)],1)],1)],1)},a=[],o=(n("4160"),n("a434"),n("159b"),n("4934")),l={name:"CompoBaseConfigView",components:{},props:{typeset:Array,config:Object,plugins:Array,selectDataFiled:Object},data:function(){return{typevalue:null,pluginData:[],lineHeight:0,select:null,compsDataList:[],selectData:[],configTemp:{}}},watch:{config:function(t){this.pluginData.splice(0,this.pluginData.length),this.configTemp=JSON.parse(JSON.stringify(this.config)),this.typevalue=this.configTemp.type,t.config?this.select=t.config.configId:(this.select=null,this.selectData.splice(0,this.selectData.length))}},computed:{},created:function(){},beforeMount:function(){var t=this;this.pluginData.splice(0,this.pluginData.length),this.configTemp=JSON.parse(JSON.stringify(this.config)),this.configTemp.config&&(this.select=this.configTemp.config.configId),this.typevalue=this.configTemp.type,Object(o["BaseCompoList"])().then((function(e){t.compsDataList=e.data.msg}))},mounted:function(){this.lineHeight=this.$refs.row.clientHeight},methods:{clearForm:function(){this.select=null,this.pluginData.splice(0,this.pluginData.length),this.$emit("close")},saveConfig:function(){this.configTemp.config=this.configTemp.config?this.configTemp.config:{},this.configTemp.type=this.typevalue,this.configTemp.plugin=this.pluginData,this.configTemp.config.configId=this.select,Object(o["saveCompoTemplate"])(this.configTemp),this.clearForm()},pluginChange:function(t){var e=0;this.pluginData.forEach((function(n){n.code===t&&e++})),e>1&&this.$message("扩展项已存在")},addPlugin:function(){this.pluginData.push({})},callback:function(){},change:function(){}}},s=l,c=n("2877"),r=Object(c["a"])(s,i,a,!1,null,"38e42f56",null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-5ea0d444.9712a2ff.js.map