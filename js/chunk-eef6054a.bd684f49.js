(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eef6054a"],{1148:function(e,t,n){"use strict";var a=n("a691"),o=n("1d80");e.exports="".repeat||function(e){var t=String(o(this)),n="",i=a(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},"38cf":function(e,t,n){var a=n("23e7"),o=n("1148");a({target:"String",proto:!0},{repeat:o})},4721:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("5a89"),o=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new a["Ab"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:a["L"].ROTATE,MIDDLE:a["L"].DOLLY,RIGHT:a["L"].PAN},this.touches={ONE:a["tb"].ROTATE,TWO:a["tb"].DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(o),n.update(),c=s.NONE},this.update=function(){var t=new a["Ab"],i=(new a["hb"]).setFromUnitVectors(e.up,new a["Ab"](0,1,0)),r=i.clone().inverse(),b=new a["Ab"],f=new a["hb"];return function(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(i),h.setFromVector3(t),n.autoRotate&&c===s.NONE&&P(A()),n.enableDamping?(h.theta+=m.theta*n.dampingFactor,h.phi+=m.phi*n.dampingFactor):(h.theta+=m.theta,h.phi+=m.phi),h.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=l,h.radius=Math.max(n.minDistance,Math.min(n.maxDistance,h.radius)),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),t.setFromSpherical(h),t.applyQuaternion(r),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),d.set(0,0,0)),l=1,!!(p||b.distanceToSquared(n.object.position)>u||8*(1-f.dot(n.object.quaternion))>u)&&(n.dispatchEvent(o),b.copy(n.object.position),f.copy(n.object.quaternion),p=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",se,!1),n.domElement.removeEventListener("mousedown",Q,!1),n.domElement.removeEventListener("wheel",ne,!1),n.domElement.removeEventListener("touchstart",oe,!1),n.domElement.removeEventListener("touchend",re,!1),n.domElement.removeEventListener("touchmove",ie,!1),document.removeEventListener("mousemove",ee,!1),document.removeEventListener("mouseup",te,!1),n.domElement.removeEventListener("keydown",ae,!1)};var n=this,o={type:"change"},i={type:"start"},r={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},c=s.NONE,u=1e-6,h=new a["rb"],m=new a["rb"],l=1,d=new a["Ab"],p=!1,b=new a["zb"],f=new a["zb"],g=new a["zb"],E=new a["zb"],v=new a["zb"],y=new a["zb"],O=new a["zb"],w=new a["zb"],T=new a["zb"];function A(){return 2*Math.PI/60/60*n.autoRotateSpeed}function L(){return Math.pow(.95,n.zoomSpeed)}function P(e){m.theta-=e}function N(e){m.phi-=e}var k=function(){var e=new a["Ab"];return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}}(),j=function(){var e=new a["Ab"];return function(t,a){!0===n.screenSpacePanning?e.setFromMatrixColumn(a,1):(e.setFromMatrixColumn(a,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),d.add(e)}}(),R=function(){var e=new a["Ab"];return function(t,a){var o=n.domElement;if(n.object.isPerspectiveCamera){var i=n.object.position;e.copy(i).sub(n.target);var r=e.length();r*=Math.tan(n.object.fov/2*Math.PI/180),k(2*t*r/o.clientHeight,n.object.matrix),j(2*a*r/o.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(k(t*(n.object.right-n.object.left)/n.object.zoom/o.clientWidth,n.object.matrix),j(a*(n.object.top-n.object.bottom)/n.object.zoom/o.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function x(e){n.object.isPerspectiveCamera?l/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Y(e){n.object.isPerspectiveCamera?l*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(e){b.set(e.clientX,e.clientY)}function S(e){O.set(e.clientX,e.clientY)}function M(e){E.set(e.clientX,e.clientY)}function z(e){f.set(e.clientX,e.clientY),g.subVectors(f,b).multiplyScalar(n.rotateSpeed);var t=n.domElement;P(2*Math.PI*g.x/t.clientHeight),N(2*Math.PI*g.y/t.clientHeight),b.copy(f),n.update()}function C(e){w.set(e.clientX,e.clientY),T.subVectors(w,O),T.y>0?x(L()):T.y<0&&Y(L()),O.copy(w),n.update()}function H(e){v.set(e.clientX,e.clientY),y.subVectors(v,E).multiplyScalar(n.panSpeed),R(y.x,y.y),E.copy(v),n.update()}function I(){}function _(e){e.deltaY<0?Y(L()):e.deltaY>0&&x(L()),n.update()}function X(e){var t=!1;switch(e.keyCode){case n.keys.UP:R(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:R(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:R(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:R(-n.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),n.update())}function Z(e){if(1==e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,n)}}function F(e){if(1==e.touches.length)E.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);E.set(t,n)}}function U(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);O.set(0,a)}function V(e){n.enableZoom&&U(e),n.enablePan&&F(e)}function W(e){n.enableZoom&&U(e),n.enableRotate&&Z(e)}function B(e){if(1==e.touches.length)f.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);f.set(t,a)}g.subVectors(f,b).multiplyScalar(n.rotateSpeed);var o=n.domElement;P(2*Math.PI*g.x/o.clientHeight),N(2*Math.PI*g.y/o.clientHeight),b.copy(f)}function G(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,a)}y.subVectors(v,E).multiplyScalar(n.panSpeed),R(y.x,y.y),E.copy(v)}function K(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+a*a);w.set(0,o),T.set(0,Math.pow(w.y/O.y,n.zoomSpeed)),x(T.y),O.copy(w)}function q(e){n.enableZoom&&K(e),n.enablePan&&G(e)}function $(e){n.enableZoom&&K(e),n.enableRotate&&B(e)}function J(){}function Q(e){if(!1!==n.enabled){switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:switch(n.mouseButtons.LEFT){case a["L"].ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;M(e),c=s.PAN}else{if(!1===n.enableRotate)return;D(e),c=s.ROTATE}break;case a["L"].PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;D(e),c=s.ROTATE}else{if(!1===n.enablePan)return;M(e),c=s.PAN}break;default:c=s.NONE}break;case 1:switch(n.mouseButtons.MIDDLE){case a["L"].DOLLY:if(!1===n.enableZoom)return;S(e),c=s.DOLLY;break;default:c=s.NONE}break;case 2:switch(n.mouseButtons.RIGHT){case a["L"].ROTATE:if(!1===n.enableRotate)return;D(e),c=s.ROTATE;break;case a["L"].PAN:if(!1===n.enablePan)return;M(e),c=s.PAN;break;default:c=s.NONE}break}c!==s.NONE&&(document.addEventListener("mousemove",ee,!1),document.addEventListener("mouseup",te,!1),n.dispatchEvent(i))}}function ee(e){if(!1!==n.enabled)switch(e.preventDefault(),c){case s.ROTATE:if(!1===n.enableRotate)return;z(e);break;case s.DOLLY:if(!1===n.enableZoom)return;C(e);break;case s.PAN:if(!1===n.enablePan)return;H(e);break}}function te(e){!1!==n.enabled&&(I(e),document.removeEventListener("mousemove",ee,!1),document.removeEventListener("mouseup",te,!1),n.dispatchEvent(r),c=s.NONE)}function ne(e){!1===n.enabled||!1===n.enableZoom||c!==s.NONE&&c!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(i),_(e),n.dispatchEvent(r))}function ae(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&X(e)}function oe(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case a["tb"].ROTATE:if(!1===n.enableRotate)return;Z(e),c=s.TOUCH_ROTATE;break;case a["tb"].PAN:if(!1===n.enablePan)return;F(e),c=s.TOUCH_PAN;break;default:c=s.NONE}break;case 2:switch(n.touches.TWO){case a["tb"].DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;V(e),c=s.TOUCH_DOLLY_PAN;break;case a["tb"].DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;W(e),c=s.TOUCH_DOLLY_ROTATE;break;default:c=s.NONE}break;default:c=s.NONE}c!==s.NONE&&n.dispatchEvent(i)}}function ie(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),c){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;B(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;G(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;q(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;$(e),n.update();break;default:c=s.NONE}}function re(e){!1!==n.enabled&&(J(e),n.dispatchEvent(r),c=s.NONE)}function se(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",se,!1),n.domElement.addEventListener("mousedown",Q,!1),n.domElement.addEventListener("wheel",ne,!1),n.domElement.addEventListener("touchstart",oe,!1),n.domElement.addEventListener("touchend",re,!1),n.domElement.addEventListener("touchmove",ie,!1),n.domElement.addEventListener("keydown",ae,!1),-1===n.domElement.tabIndex&&(n.domElement.tabIndex=0),this.update()};o.prototype=Object.create(a["o"].prototype),o.prototype.constructor=o;var i=function(e,t){o.call(this,e,t),this.mouseButtons.LEFT=a["L"].PAN,this.mouseButtons.RIGHT=a["L"].ROTATE,this.touches.ONE=a["tb"].PAN,this.touches.TWO=a["tb"].DOLLY_ROTATE};i.prototype=Object.create(a["o"].prototype),i.prototype.constructor=i},a3fd:function(e,t,n){e.exports=n.p+"img/terrain.44a85d36.png"},b5b7:function(e,t,n){e.exports=n.p+"img/texture.307a27a4.png"},f042:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("canvas",{ref:"container",staticStyle:{width:"100%",height:"100%"},style:{}})},o=[],i=(n("38cf"),n("5a89")),r=n("4721"),s=(n("d3b7"),n("d4ec")),c=n("bee2"),u=function(){function e(t,n){Object(s["a"])(this,e),this.width=t,this.height=n,this.geometry=new i["cb"](t,n,t-1,n-1);var a=(new i["O"]).makeRotationX(-Math.PI/2);this.geometry.applyMatrix(a),this.array=this.geometry.attributes.position.array,this.mesh=null}return Object(c["a"])(e,[{key:"build",value:function(e){return this.geometry.computeBoundingSphere(),this.geometry.computeVertexNormals(),this.material=new i["R"]({map:e}),this.mesh=new i["P"](this.geometry,this.material),this.mesh.position.x=this.width/2,this.mesh.position.z=this.height/2,this.mesh}},{key:"getHeightAt",value:function(e,t){var n=this.width,a=this.height;if(e<0||e>=n||t<0||t>=a)throw new Error("point outside of terrain boundary");var o=Math.floor(e),i=Math.floor(t),r=e-o,s=t-i,c=this.array[3*(i*n+o)+1],u=this.array[3*(i*n+(o+1))+1],h=this.array[3*((i+1)*n+(o+1))+1],m=this.array[3*((i+1)*n+o)+1],l=c*(1-r)+u*r,d=h*r+m*(1-r),p=l*(1-s)+d*s;return p}}],[{key:"fromImage",value:function(t){return new Promise((function(n,a){var o=new Image;o.onload=function(){var t=o.width,a=o.height,i=document.createElement("canvas");i.width=t,i.height=a;var r=i.getContext("2d");r.drawImage(o,0,0);for(var s=r.getImageData(0,0,t,a).data,c=new e(t,a),u=0;u<t*a;u++)c.array[3*u+1]=s[4*u]/256;n(c)},o.onabort=a,o.onerror=a,o.src=t}))}}]),e}(),h=u,m={name:"threeTerrain",data:function(){return{controll:null,renderer:null,camera:null,scene:null,path:n("a3fd"),texture:n("b5b7"),cameraOpt:{angle:70,min:.1,max:1e3}}},mounted:function(){this.init()},methods:{init:function(){this.initRenderer(),this.inirCamera(),this.initControll(),this.initScene(),this.addData(this.path,this.texture),this.animation()},initControll:function(){this.controll=new r["a"](this.camera,this.renderer.domElement)},animation:function(){var e=this;this.controll.update(),this.render(),requestAnimationFrame((function(){e.animation()}))},render:function(){this.renderer.render(this.scene,this.camera)},initRenderer:function(){var e=this.$refs.container.clientWidth,t=this.$refs.container.clientHeight;this.renderer=new i["Db"]({canvas:this.$refs.container}),this.renderer.setSize(e,t)},inirCamera:function(){var e=this.$refs.container.clientWidth,t=this.$refs.container.clientHeight;this.camera=new i["bb"](this.cameraOpt.angle,e/t,this.cameraOpt.min,this.cameraOpt.max)},initScene:function(){this.scene=new i["mb"];var e=new i["l"](14737632);e.position.set(1,1,0).normalize(),this.scene.add(e);var t=new i["r"](10061943,.005);this.scene.fog=t,this.renderer.setClearColor(t.color,1)},addData:function(e,t){var n=this;h.fromImage(e).then((function(e){var a=(new i["vb"]).load(t);a.wrapS=a.wrapT=i["lb"],a.repeat.set(e.width,e.height);var o=e.build(a);e.mesh.scale.y=50,n.scene.add(o),n.camera.position.x=e.width/2,n.camera.position.y=100,n.camera.position.z=e.height/2,n.camera.lookAt(new i["Ab"](e.width/2,100,e.height/2))}))}}},l=m,d=n("2877"),p=Object(d["a"])(l,a,o,!1,null,"a1f4362a",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-eef6054a.bd684f49.js.map